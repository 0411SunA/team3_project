---
title: "2018-2022 5개년 연별 국내 여행 횟수 트랜드"
jupyter: python3
---

# 2018 - 2022 5개년 연별 국내 여행 횟수 트랜드

## Raw Data : 통계청 - 월별 국내여행 횟수

-   <https://kosis.kr/statHtml/statHtml.do?orgId=113&tblId=DT_113_STBL_1029207&vw_cd=MT_ZTITLE&list_id=314_31401_013&scrId=&seqNo=&lang_mode=ko&obj_var_id=&itm_id=&conn_path=MT_ZTITLE&path=%252FstatisticsList%252FstatisticsListIndex.do>

-   국내 여행의 의미

    -   공간의 범위

        행정구역상 현 거주지를 벗어나 다른 지역(시/군)을 다녀온 모든 여행을 의미

    -   활동의 범위

        1.  관광 여행

            관광, 맛집 투어, 박물관, 전시 구경, 스포츠, 레저 체험 등의 모든 활동

        2.  기타 여행

            명절 귀성, 가족 행사, 출장, 업무 세미나 등 모든 활동

## Data Preprocessing : 데이터 전처리

-   Data 저장 경로 규칙

    -   원본 데이터 : data 폴더의 R_월별_국내여행_횟수_20240714204514.xlsx

    -   전처리 이후 데이터 : pre_data 폴더의 p_num_trip.xlsx

-   데이터의 기본 단위 : 천회

-   데이터 전처리

```{python}
# 라이브러리 호출
import pandas as pd
import numpy as np

# 데이터 불러오기
# data : 원본 파일 저장 폴더
# pre_data : 전처리 후 파일 저장 폴더

# header를 두번째 행으로 고정
num_trip = pd.read_excel('data/R_월별_국내여행_횟수_20240714204514.xlsx', header=1)

# 데이터 전처리

# 열(columns)의 변수명 변경

# 시점
num_trip = num_trip.rename(columns = { '시점' : 'year', '항목' : 'month'})

# 전체
num_trip = num_trip.rename(columns = { '소계' : 'total'})

# 성별
num_trip = num_trip.rename(columns = { '남자' : 'male', '여자' :'female'})


# 학력
num_trip = num_trip.rename(columns = { '초졸 이하' : 'elmt', '중학교' : 'mid',
						               '고등학교' : 'high', '대학교이상' : 'univ+'})

# 가구원수
num_trip = num_trip.rename(columns = { '1인' : 'per1',
						               '2인' : 'per2',
						               '3인이상' : 'per3+'})

# 열(columns)의 파생변수 생성
# 연령 
# 15~19세, 20대, 30대, 40대, 50대, 60대, 70세 이상을 청소년, 청년, 중년, 노년 층으로 구분
num_trip["teens"] = num_trip["15~19세"]
num_trip["young_adults"] = num_trip["20대"] + num_trip["30대"]
num_trip["middle_adults"] = num_trip["40대"] + num_trip["50대"]
num_trip["seniors"] = num_trip["60대"] + num_trip["70세 이상"]

# 15~19세, 20대, 30대, 40대, 50대, 60대, 70세 이상 열 7개 삭제
num_trip = num_trip.drop(num_trip.columns[np.arange(5,12,1)], axis=1)

# 가구소득
# 저소득 ~ 200 만원 / 중위소득 200~500 만원 / 고소득 500~600이상 / 무응답
num_trip["l_sal"] = num_trip["100만원 미만"]     + num_trip["100~200만원 미만"]
num_trip["m_sal"] = num_trip["200~300만원 미만"] + num_trip["300~400만원 미만"] + num_trip["400~500만원 미만"]
num_trip["h_sal"] = num_trip["500~600만원 미만"] + num_trip["600만원 이상"]
num_trip["nr"]    = num_trip["무응답"]

# 100만원 미만, 100~200만원 미만, 200~300만원 미만, 300~400만원 미만,
# 400~500만원 미만, 500~600만원 미만, 600만원 이상, 무응답 총 8열 삭제
num_trip = num_trip.drop(num_trip.columns[np.arange(24,32,1)], axis=1)

# 열(columns) 삭제
# 직업 - 직업과 여행 횟수간의 상관관계가 크게 없다고 판단하여
# 임금봉급근로자, 고용원있는사업주, 고용원없는자영업자
# 무급가족 종사자, 사무전문, 기술생산노무, 판매서비스
# 자영업, 학생, 전업주부, 무직은퇴, 기타
# 12개의 열 삭제
num_trip = num_trip.drop(num_trip.columns[np.arange(5,17,1)], axis=1)

# 데이터 전처리 시
# 원본 : 39개 열, 파생변수 : 4 + 4 = 8 개열 생성, 열 삭제 : 27개 열 삭제
# 39 + 4 + 4 - 27 = 20 개의 columns이 생성됩니다.

# 데이터 확인
num_trip.info() 
num_trip.shape
num_trip.describe()
num_trip.head(12)
num_trip.tail(12)

# 데이터 문제점
# 1. year의 null값을 채워야함
# 2018, 2019, 2020, 2021, 2022 슬라이싱
num_trip['year'][1 :12] = 2018
num_trip['year'][13:24] = 2019
num_trip['year'][25:36] = 2020
num_trip['year'][37:48] = 2021
num_trip['year'][49:60] = 2022

# 2. month의 '월'값을 제거한 후 int값으로 형 변환 필요
# str 에서 맨 마지막 글자 제거
num_trip['month'] = num_trip['month'].str.replace('월','')
num_trip['month'] = num_trip['month'].astype('int')

# 3. nr(월급 미 응답자)의 nan값이 '-'로 대응되어 있음
num_trip.loc[num_trip["nr"] == "-", ["nr"]] = np.nan

# 데이터를 data폴더에 전처리 이후 데이터로 excel형태로 추출하고 형태 확인
# Unnamed: 0 이라는 인덱스가 생성되는 것을 방지하기 위해 index=False로 지정
# 가공된 데이터라는 의미인 (processing) 의 p를 파일 앞에 붙여 전처리 유무 구분
num_trip.to_excel(excel_writer = 'pre_data/p_num_trip.xlsx', index=False)
```

## Data Visualization : 데이터 시각화

```{python}
# 사용 라이브러리 호출
import pandas as pd
import numpy as np 

# 전처리 된 데이터 불러오기
p_num_trip = pd.read_excel('pre_data/p_num_trip.xlsx')

# 데이터 정보 확인하기
# p_num_trip(년-월 별 여행 횟수)데이터 정보 확인하기
p_num_trip.info()
p_num_trip.shape
p_num_trip.head()
p_num_trip.describe()

# 분석을 용이하게 하기 위해 년도별 DataFrame생성
y2018 = p_num_trip.query('year == 2018')
y2019 = p_num_trip.query('year == 2019')
y2020 = p_num_trip.query('year == 2020')
y2021 = p_num_trip.query('year == 2021')
y2022 = p_num_trip.query('year == 2022')

# 데이터 시각화
# 시각화 라이브러리 호출
import matplotlib.pyplot as plt

# 그래프에 한글 표시하기
plt.rcParams['font.family'] ='Malgun Gothic'
# 언더바(_) 표시 가능하게 만듬
plt.rcParams['axes.unicode_minus'] =False

# 데이터 시각화

# 3. 2018년도 부터 2020년도 까지 연령별 여행 횟수 증감의 트랜드 구하기
# 데이터 선택

# for x in range 구문을 이용하여 다음과 같은 반복문을 실행
teens_total = [x['teens'].sum() for x in [y2018, y2019, y2020, y2021, y2022]]
young_adults_total = [x['young_adults'].sum() for x in [y2018, y2019, y2020, y2021, y2022]]
middle_adults_total = [x['middle_adults'].sum() for x in [y2018, y2019, y2020, y2021, y2022]]
seniors_adults_total = [x['seniors'].sum() for x in [y2018, y2019, y2020, y2021, y2022]]
years = [2018,2019,2020,2021,2022]

# 그래프 제목과 y축 레이블 설정
plt.title("2018년 ~ 2022년 연령대 별 여행 횟수")
plt.ylabel("단위 : 천회")
plt.xlabel("단위 : 년")

# 그래프 표시
x_range = np.arange(len(years))
plt.bar(x_range+0.0, teens_total, width=0.2, label='청소년(15~19세)', color = 'lawngreen')
plt.bar(x_range+0.2, young_adults_total, width=0.2, label='청년(2~30대)', color = 'blue')
plt.bar(x_range+0.4, middle_adults_total, width=0.2, label='중년(4~50대)', color = 'red')
plt.bar(x_range+0.6, seniors_adults_total, width=0.2, label='노년(6~70대 이상)', color = 'gray')

# x축 라벨 설정
plt.xticks(x_range+0.3, years)

# 범례추가
plt.legend()

# 그래프 보여주기
plt.show()
plt.clf()

# 4. 가구원수 별 2018 ~ 2022년 연간 여행 횟수 비교
# for x in range 구문을 이용하여 다음과 같은 반복문을 실행
per1_total = [x['per1'].sum() for x in [y2018, y2019, y2020, y2021, y2022]]
per2_total = [x['per2'].sum() for x in [y2018, y2019, y2020, y2021, y2022]]
per3_total = [x['per3+'].sum() for x in [y2018, y2019, y2020, y2021, y2022]]
years = [2018,2019,2020,2021,2022]

# 그래프 제목과 y축 레이블 설정
plt.title("2018년 ~ 2022년 가구원 수 별 여행 횟수")
plt.ylabel("단위 : 천회")
plt.xlabel("단위 : 년")

# 그래프 표시
x_range = np.arange(len(years))
plt.bar(x_range+0.0, per1_total, width=0.2, label='1인 가구', color = 'slateblue')
plt.bar(x_range+0.2, per2_total, width=0.2, label='2인 가구', color = 'coral')
plt.bar(x_range+0.4, per3_total, width=0.2, label='3인 이상 가구', color = 'teal')

# x축 라벨 설정
plt.xticks(x_range+0.25, years) 

# 범례추가
plt.legend()

# 그래프 보여주기
plt.show()
plt.clf()

```
